<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Renaissance</title>
</head>

<body>
    <input type="text" id="searchBox" placeholder="倔强" />
    <button id="searchBtn">Search</button>
    <audio id="audio" controls="controls" loop="true">
      <source src="" type="audio/mpeg" />
      Your browser does not support the audio tag.
    </audio>
    
    <script>
      let searchBox = document.getElementById("searchBox"); // 获取搜索框元素
      let searchBtn = document.getElementById("searchBtn"); // 获取搜索按钮元素
      let audio = document.getElementById("audio"); // 获取音频元素
      // const defaultUrlHeader = "https://autumnfish.cn/";  // 默认URL头部1
      const defaultUrlHeader = "http://musicapi.leanapp.cn"; // 默认URL头部2
      const songsUrlHeader = "http://music.163.com"; // 音乐URL头部
  
      // AJAX请求函数
      function AjaxRequest(url, operationFun) {
        let xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function () {
          if (this.readyState == 4 && this.status == 200) {
            operationFun(JSON.parse(xhttp.responseText));
          }
        };
        xhttp.open("GET", url, true);
        xhttp.send();
      }
  
      // 根据关键字点击搜索
      searchBtn.onclick = function () {
        let searchKeywords = searchBox.value;
        if (searchKeywords == "") {
          searchKeywords = searchBox.placeholder;
        }
        let keywordsUrl =
          defaultUrlHeader + "/search/suggest?keywords=" + searchKeywords;
        AjaxRequest(keywordsUrl, renderTheFirstSong);
      };
  
      // 更换音频URL，默认播放第一条结果
      function renderTheFirstSong(responseText) {
        audio.src =
          songsUrlHeader +
          "/song/media/outer/url?id=" +
          responseText.result.songs[0].id +
          ".mp3";
      }
    </script>
  </body>

</html>






<!-- #### Ajax使用示例

###### GET请求

+ ```
    var xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function() {
      if (this.readyState == 4 && this.status == 200) {
       document.getElementById("demo").innerHTML = this.responseText;
      }
    };
    xhttp.open("GET", url, true);
    xhttp.send();
  ```

###### POST请求

+ ```
  var xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function() {
      if (this.readyState == 4 && this.status == 200) {
        document.getElementById("demo").innerHTML = this.responseText;
      }
    };
    xhttp.open("POST", url, true);
    xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    xhttp.send("parameters");
  ```

###### 回调函数 -->
